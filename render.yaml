services:
  # ── User Panel → app.frixa.in ──────────────────────────────────────────────
  - type: web
    name: frixa-app
    runtime: static
    buildCommand: cd apps/dashboard && npm install && npm run build
    staticPublishPath: apps/dashboard/dist
    pullRequestPreviewsEnabled: false
    routes:
      - type: rewrite
        source: /*
        destination: /index.html
    envVars:
      - key: VITE_SUPABASE_URL
        sync: false
      - key: VITE_SUPABASE_ANON_KEY
        sync: false

  # ── Landing Page → frixa.in ────────────────────────────────────────────────
  - type: web
    name: frixa-landing
    runtime: static
    buildCommand: cd apps/landing && npm install && npm run build
    staticPublishPath: apps/landing/dist
    pullRequestPreviewsEnabled: false
    routes:
      - type: rewrite
        source: /*
        destination: /index.html

  # ── Admin Panel → admin.frixa.in ───────────────────────────────────────────
  - type: web
    name: frixa-admin
    runtime: static
    buildCommand: cd apps/admin && npm install && npm run build
    staticPublishPath: apps/admin/dist
    pullRequestPreviewsEnabled: false
    routes:
      - type: rewrite
        source: /*
        destination: /index.html
    envVars:
      - key: VITE_SUPABASE_URL
        sync: false
      - key: VITE_SUPABASE_ANON_KEY
        sync: false
